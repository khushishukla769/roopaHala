var $=Object.defineProperty;var j=(t,i,e)=>i in t?$(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e;var I=(t,i,e)=>(j(t,typeof i!="symbol"?i+"":i,e),e),x=(t,i,e)=>{if(!i.has(t))throw TypeError("Cannot "+e)};var E=(t,i,e)=>(x(t,i,"read from private field"),e?e.call(t):i.get(t)),_=(t,i,e)=>{if(i.has(t))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(t):i.set(t,e)},M=(t,i,e,u)=>(x(t,i,"write to private field"),u?u.call(t,e):i.set(t,e),e);var A=(t,i,e)=>(x(t,i,"access private method"),e);import{R as z}from"./index.064c5607.js";import{C as G}from"./custom-media-element.c6942572.js";import{M as V,H as k}from"./hls.bf3db5f6.js";const Y=t=>{var i,e,u,m,B,y,L,N;return i=class extends t{constructor(){super();_(this,m);_(this,L);_(this,e,null);_(this,u,null);_(this,y,()=>{var n,r,g;(n=this.nativeEl)!=null&&n.webkitCurrentPlaybackTargetIsWireless?(r=this.api)==null||r.stopLoad():(g=this.api)==null||g.startLoad()});A(this,L,N).call(this,"config")}get config(){return E(this,u)}set config(n){M(this,u,n)}attributeChangedCallback(n,r,g){n!=="src"&&super.attributeChangedCallback(n,r,g),n==="src"&&r!=g&&this.load()}async load(){var n,r;const g=!this.api;if(A(this,m,B).call(this),!!this.src){if(g&&!E(this,u)&&M(this,u,JSON.parse(((n=this.shadowRoot.getElementById("config"))==null?void 0:n.textContent)||"{}")),k.isSupported()){switch(this.api=new k({liveDurationInfinity:!0,autoStartLoad:!1,...this.config}),await Promise.resolve(),this.api.loadSource(this.src),this.api.attachMedia(this.nativeEl),this.nativeEl.preload){case"none":{const l=()=>this.api.startLoad();this.nativeEl.addEventListener("play",l,{once:!0}),this.api.on(k.Events.DESTROYING,()=>{this.nativeEl.removeEventListener("play",l)});break}case"metadata":{const l=this.api.config.maxBufferLength,s=this.api.config.maxBufferSize;this.api.config.maxBufferLength=1,this.api.config.maxBufferSize=1;const c=()=>{this.api.config.maxBufferLength=l,this.api.config.maxBufferSize=s};this.nativeEl.addEventListener("play",c,{once:!0}),this.api.on(k.Events.DESTROYING,()=>{this.nativeEl.removeEventListener("play",c)}),this.api.startLoad();break}default:this.api.startLoad()}this.nativeEl.webkitCurrentPlaybackTargetIsWireless&&this.api.stopLoad(),this.nativeEl.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",E(this,y)),M(this,e,document.createElement("source")),E(this,e).setAttribute("type","application/x-mpegURL"),E(this,e).setAttribute("src",this.src),this.nativeEl.disableRemotePlayback=!1,this.nativeEl.append(E(this,e));const v=new WeakMap;this.api.on(k.Events.MANIFEST_PARSED,(l,s)=>{this.nativeEl.autoplay&&this.nativeEl.paused&&this.nativeEl.play().catch(h=>{console.warn("Autoplay failed:",h)}),w();let c=this.videoTracks.getTrackById("main");c||(c=this.addVideoTrack("main"),c.id="main",c.selected=!0);for(const[h,d]of s.levels.entries()){const p=c.addRendition(d.url[0],d.width,d.height,d.videoCodec,d.bitrate);v.set(d,`${h}`),p.id=`${h}`}for(let[h,d]of s.audioTracks.entries()){const p=d.default?"main":"alternative",o=this.addAudioTrack(p,d.name,d.lang);o.id=`${h}`,d.default&&(o.enabled=!0)}}),this.audioTracks.addEventListener("change",()=>{var l;const s=+((l=[...this.audioTracks].find(h=>h.enabled))==null?void 0:l.id),c=this.api.audioTracks.map(h=>h.id);s!=this.api.audioTrack&&c.includes(s)&&(this.api.audioTrack=s)}),this.api.on(k.Events.LEVELS_UPDATED,(l,s)=>{var d;const c=this.videoTracks[(d=this.videoTracks.selectedIndex)!=null?d:0];if(!c)return;const h=s.levels.map(p=>v.get(p));for(const p of this.videoRenditions)p.id&&!h.includes(p.id)&&c.removeRendition(p)});const S=l=>{const s=l.target.selectedIndex;s!=this.api.nextLevel&&(this.api.nextLevel=s)};(r=this.videoRenditions)==null||r.addEventListener("change",S);const w=()=>{for(const l of this.videoTracks)this.removeVideoTrack(l);for(const l of this.audioTracks)this.removeAudioTrack(l)};this.api.once(k.Events.DESTROYING,w);return}await Promise.resolve(),this.nativeEl.canPlayType("application/vnd.apple.mpegurl")&&(this.nativeEl.src=this.src)}}},e=new WeakMap,u=new WeakMap,m=new WeakSet,B=function(){var n,r;(n=E(this,e))==null||n.remove(),(r=this.nativeEl)==null||r.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",E(this,y)),this.api&&(this.api.detachMedia(),this.api.destroy(),this.api=null)},y=new WeakMap,L=new WeakSet,N=function(n){if(Object.prototype.hasOwnProperty.call(this,n)){const r=this[n];delete this[n],this[n]=r}},I(i,"shadowRootOptions",{...t.shadowRootOptions}),I(i,"getTemplateHTML",(n,r={})=>{const{src:g,...v}=n;return`
        <script type="application/json" id="config">
          ${JSON.stringify(r.config||{})}
        <\/script>
        ${t.getTemplateHTML(v)}
      `}),i},D=Y(V(G));globalThis.customElements&&!globalThis.customElements.get("hls-video")&&globalThis.customElements.define("hls-video",D);var J=D,U=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),q={className:"class",htmlFor:"for"};function W(t){return t.toLowerCase()}function O(t){if(typeof t=="boolean")return t?"":void 0;if(typeof t!="function"&&!(typeof t=="object"&&t!==null))return t}function K({react:t,tagName:i,elementClass:e,events:u,displayName:m,defaultProps:F,toAttributeName:y=W,toAttributeValue:L=O}){const H=Number.parseInt(t.version)>=19,R=t.forwardRef((P,n)=>{var h,d,p;var r,g;const v=t.useRef(null),S=t.useRef(new Map),w={},l={},s={},c={};for(const[o,a]of Object.entries(P)){if(U.has(o)){s[o]=a;continue}const f=y((h=q[o])!=null?h:o);if(e.prototype&&o in e.prototype&&!(o in((d=(r=globalThis.HTMLElement)==null?void 0:r.prototype)!=null?d:{}))&&!((g=e.observedAttributes)!=null&&g.some(b=>b===f))){c[o]=a;continue}if(o.startsWith("on")){w[o]=a;continue}const T=L(a);if(f&&T!=null&&(l[f]=String(T),H||(s[f]=T)),f&&H){const b=O(a);T!==b?s[f]=T:s[f]=a}}if(typeof window<"u"){for(const o in w){const a=w[o],f=o.endsWith("Capture"),T=((p=u==null?void 0:u[o])!=null?p:o.slice(2).toLowerCase()).slice(0,f?-7:void 0);t.useLayoutEffect(()=>{const b=v==null?void 0:v.current;if(!(!b||typeof a!="function"))return b.addEventListener(T,a,f),()=>{b.removeEventListener(T,a,f)}},[v==null?void 0:v.current,a])}t.useLayoutEffect(()=>{if(v.current===null)return;const o=new Map;for(const a in c)C(v.current,a,c[a]),S.current.delete(a),o.set(a,c[a]);for(const[a,f]of S.current)C(v.current,a,void 0);S.current=o})}if(typeof window>"u"&&(e==null?void 0:e.getTemplateHTML)&&(e==null?void 0:e.shadowRootOptions)){const{mode:o,delegatesFocus:a}=e.shadowRootOptions,f=t.createElement("template",{shadowrootmode:o,shadowrootdelegatesfocus:a,dangerouslySetInnerHTML:{__html:e.getTemplateHTML(l,P)}});s.children=[f,s.children]}return t.createElement(i,{...F,...s,ref:t.useCallback(o=>{v.current=o,typeof n=="function"?n(o):n!==null&&(n.current=o)},[n])})});return R.displayName=m!=null?m:e.name,R}function C(t,i,e){var m;var u;t[i]=e,e==null&&i in((m=(u=globalThis.HTMLElement)==null?void 0:u.prototype)!=null?m:{})&&t.removeAttribute(i)}var it=K({react:z,tagName:"hls-video",elementClass:J,toAttributeName(t){return t==="muted"?"":t==="defaultMuted"?"muted":W(t)}});/*! Bundled license information:

ce-la-react/dist/ce-la-react.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *
   * Modified version of `@lit/react` for vanilla custom elements with support for SSR.
   *)
*/export{it as default};
